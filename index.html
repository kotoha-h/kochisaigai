<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>高知県 防災避難所マップ（34市町村）</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      line-height: 1.6;
    }

    h2 {
      margin: 12px 10px 6px;
    }

    p {
      margin: 6px 10px;
      font-size: 14px;
    }

    #map {
      height: 60vh;
    }

    /* 凡例 */
    .legend {
      background: white;
      padding: 8px 10px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      font-size: 13px;
    }

    /* 2列レイアウト */
    .flex-container {
      display: flex;
      gap: 12px;
      margin: 10px;
    }

    .box {
      flex: 1;
      padding: 10px;
      background: #f7f7f7;
      border-radius: 6px;
    }

    .box h3 {
      margin-top: 0;
      font-size: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th, td {
      border: 1px solid #999;
      padding: 8px;
      vertical-align: top;
    }

    th {
      background: #eaeaea;
      width: 90px;
      text-align: center;
    }

    /* 追加：色分け */
    .quake {
      color: #b30000; /* 赤 */
      font-weight: bold;
    }

    .tsunami {
      color: #0059b3; /* 青 */
      font-weight: bold;
    }

    /* アイコン風の丸 */
    .dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 6px;
      vertical-align: middle;
    }
    .dot.red { background: #b30000; }
    .dot.blue { background: #0059b3; }

    /* 持ち出し品カテゴリ色 */
    .must {
      color: #b30000; /* 赤 */
      font-weight: bold;
    }
    .nice {
      color: #0059b3; /* 青 */
      font-weight: bold;
    }
    .family {
      color: #007a29; /* 緑 */
      font-weight: bold;
    }

  </style>
</head>

<body>

  <h2>高知県 防災避難所マップ</h2>

  <p>
    <span class="dot red"></span>
    <span class="quake">地震避難所</span>：学校・体育館など内陸の安全な施設を想定<br>
    <span class="dot blue"></span>
    <span class="tsunami">津波避難所</span>：高台・津波避難タワーなどを想定
  </p>

  <div id="map"></div>

  <!-- ===============================
       2列レイアウト（豆知識＋持ち出し品）
       =============================== -->
  <div class="flex-container">

    <!-- 豆知識 -->
    <div class="box">
      <h3>📘 地震と津波の豆知識</h3>
      <table>
        <tr>
          <th class="quake">地震</th>
          <td>大きな地震では、揺れが収まった後も余震が何度も発生することがある。</td>
        </tr>
        <tr>
          <th class="quake">地震</th>
          <td>海の近くで強い揺れを感じた場合、津波警報を待たずに避難することが重要。</td>
        </tr>
        <tr>
          <th class="quake">地震</th>
          <td>家具の転倒が大きなけがの原因になるため、普段から固定しておくことが大切。</td>
        </tr>
        <tr>
          <th class="quake">地震</th>
          <td>地盤が崩れると土砂災害にもつながるため、地形の危険箇所に注意する。</td>
        </tr>
        <tr>
          <th class="tsunami">津波</th>
          <td>津波は第一波より、後から来る波の方が高くなる場合がある。</td>
        </tr>
        <tr>
          <th class="tsunami">津波</th>
          <td>津波は海だけでなく、川や用水路を逆流して内陸まで到達することがある。</td>
        </tr>
        <tr>
          <th class="tsunami">津波</th>
          <td>津波警報・注意報が解除されるまでは、海や川に近づいてはいけない。</td>
        </tr>
        <tr>
          <th class="tsunami">津波</th>
          <td>情報を過信しすぎず、その場の状況に合わせて判断し、速やかに避難することが大切。</td>
        </tr>
      </table>
    </div>

    <!-- 持ち出し品 -->
    <div class="box">
      <h3>🎒 避難に必要な持ち出し品</h3>
      <table>
        <tr>
          <th class="must">必須</th>
          <td>
            水（3日分）<br>
            食料（非常食）<br>
            懐中電灯・電池<br>
            携帯電話・充電器<br>
            現金（小銭）<br>
            保険証・身分証
          </td>
        </tr>
        <tr>
          <th class="nice">あったら便利</th>
          <td>
            常備薬<br>
            マスク・消毒液<br>
            レインコート・防寒具<br>
            タオル・ウェットティッシュ<br>
            予備の靴・下着
          </td>
        </tr>
        <tr>
          <th class="family">家族用</th>
          <td>
            連絡先メモ<br>
            子ども用品（ミルク・おむつ）<br>
            ペット用品（フード・リード）
          </td>
        </tr>
      </table>
    </div>

  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- ===============================
       JS（地図・避難所）
       =============================== -->
  <script>
    // 地図初期化（高知県全域）
    const map = L.map("map").setView([33.35, 133.2], 8);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution: "© OpenStreetMap contributors",
    }).addTo(map);

    // アイコン
    const quakeIcon = L.icon({
      iconUrl: "https://maps.google.com/mapfiles/ms/icons/red-dot.png",
      iconSize: [32, 32],
    });

    const tsunamiIcon = L.icon({
      iconUrl: "https://maps.google.com/mapfiles/ms/icons/blue-dot.png",
      iconSize: [32, 32],
    });

    // 高知県 全34市町村（代表座標）
    const municipalities = [
      // 市
      { name: "高知市", lat: 33.5597, lng: 133.5311 },
      { name: "室戸市", lat: 33.2896, lng: 134.1516 },
      { name: "安芸市", lat: 33.5030, lng: 133.9060 },
      { name: "南国市", lat: 33.5756, lng: 133.6414 },
      { name: "土佐市", lat: 33.5000, lng: 133.4500 },
      { name: "須崎市", lat: 33.4006, lng: 133.2837 },
      { name: "宿毛市", lat: 32.9386, lng: 132.7267 },
      { name: "土佐清水市", lat: 32.7800, lng: 132.9500 },
      { name: "四万十市", lat: 32.9900, lng: 132.9300 },
      { name: "香南市", lat: 33.5600, lng: 133.7000 },
      { name: "香美市", lat: 33.6000, lng: 133.7200 },

      // 町村
      { name: "東洋町", lat: 33.5280, lng: 134.2800 },
      { name: "奈半利町", lat: 33.4200, lng: 134.0200 },
      { name: "田野町", lat: 33.4300, lng: 134.0100 },
      { name: "安田町", lat: 33.4400, lng: 133.9800 },
      { name: "北川村", lat: 33.4500, lng: 134.0200 },
      { name: "馬路村", lat: 33.5500, lng: 134.0500 },
      { name: "芸西村", lat: 33.5200, lng: 133.8000 },
      { name: "本山町", lat: 33.7700, lng: 133.5900 },
      { name: "大豊町", lat: 33.7500, lng: 133.7200 },
      { name: "土佐町", lat: 33.7800, lng: 133.5000 },
      { name: "大川村", lat: 33.7900, lng: 133.4700 },
      { name: "いの町", lat: 33.5500, lng: 133.4200 },
      { name: "仁淀川町", lat: 33.6100, lng: 133.2800 },
      { name: "中土佐町", lat: 33.3300, lng: 133.2300 },
      { name: "佐川町", lat: 33.5000, lng: 133.2900 },
      { name: "越知町", lat: 33.5300, lng: 133.2500 },
      { name: "檮原町", lat: 33.3900, lng: 132.9300 },
      { name: "日高村", lat: 33.5300, lng: 133.3700 },
      { name: "津野町", lat: 33.4400, lng: 133.0400 },
      { name: "四万十町", lat: 33.2100, lng: 133.1400 },
      { name: "大月町", lat: 32.8400, lng: 132.6800 },
      { name: "三原村", lat: 32.9900, lng: 132.8300 },
      { name: "黒潮町", lat: 33.0300, lng: 133.0100 },
    ];

    // 避難所生成
    municipalities.forEach((m) => {

      // 🔴 地震避難所（2か所）
      for (let i = 1; i <= 2; i++) {
        L.marker(
          [m.lat + i * 0.01, m.lng - i * 0.01],
          { icon: quakeIcon }
        )
          .addTo(map)
          .bindPopup(`
            <div style="color:#b30000; font-weight:bold;">
              🔴 地震避難所 ${i}
            </div>
            <strong>${m.name}</strong><br>
            内陸の学校・体育館を想定
          `);
      }

      // 🔵 津波避難所（1か所）
      L.marker(
        [m.lat - 0.02, m.lng + 0.02],
        { icon: tsunamiIcon }
      )
        .addTo(map)
        .bindPopup(`
          <div style="color:#0059b3; font-weight:bold;">
            🔵 津波避難所
          </div>
          <strong>${m.name}</strong><br>
          高台・津波避難タワー想定
        `);
    });

    // 凡例（色分け）
    const legend = L.control({ position: "bottomright" });

    legend.onAdd = function () {
      const div = L.DomUtil.create("div", "legend");
      div.innerHTML = `
        <strong>凡例</strong><br>
        <span style="color:#b30000; font-weight:bold;">🔴 地震避難所</span><br>
        <span style="color:#0059b3; font-weight:bold;">🔵 津波避難所</span>
      `;
      return div;
    };

    legend.addTo(map);
  </script>

</body>
</html>
